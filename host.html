<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC Host</title>
    <style>
        .dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <h1>WebRTC Host</h1>
    <p>Dots will appear where the client clicks.</p>

    <script>
        // Create a new RTCPeerConnection
        const peerConnection = new RTCPeerConnection();

        // Handle the data channel for receiving click data
        peerConnection.ondatachannel = (event) => {
            const dataChannel = event.channel;
            dataChannel.onmessage = (event) => {
                const clickData = JSON.parse(event.data);
                spawnDot(clickData.x, clickData.y);
            };
        };

        // Function to spawn a dot at the given coordinates
        function spawnDot(x, y) {
            const dot = document.createElement('div');
            dot.className = 'dot';
            dot.style.left = `${x}px`;
            dot.style.top = `${y}px`;
            document.body.appendChild(dot);
        }

        // Example of setting up the peer connection and signaling (simplified)
        peerConnection.onicecandidate = event => {
            if (event.candidate) {
                // Send the candidate to the client (signaling step)
                console.log("New ICE candidate:", event.candidate);
            }
        };

        // Assume signaling has completed and we can set the remote description
        async function startConnection() {
            // Example: Wait for offer from client, then create answer
            const offer = /* get offer from client via signaling */;
            await peerConnection.setRemoteDescription(offer);

            const answer = await peerConnection.createAnswer();
            await peerConnection.setLocalDescription(answer);
            // Signal the answer back to the client

            console.log("Answer created and set as local description");
        }

        startConnection();
    </script>
</body>
</html>
